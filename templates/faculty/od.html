{% extends '../base.html' %}
{% load static %}
{% load faculty_filters %}

{% block nav-content %}
<li class="nav-item" role="presentation">
	<a class="nav-link pr-3" href="{% url 'od' %}" style="color: white;">OD</a>
</li>
{% endblock %}

{% block content %}
<main>
	<div class="row mt-3 ml-2">
		{% include '../includes/sidebar.html' with id="od" %}

		<div class="col-sm-8 col-md-7">
			<div class="container border mb-5">
				{% if od %}
				<form class=" border-primary" method="POST" action="{% url 'submit_od_loadshift' %}">
					{% csrf_token %}
					<div class="card text-center mt-3">
						<div class="card-header text-dark">
							{{ od.od_title }}
						</div>
						<div class="card-body">
							<h5 class="card-title">Type: {{ od.od_type }}</h5>
							<p class="card-text">
								{{ od.od_details }}
							</p>
							<div class="row text-left mb-2">
								<div class="col-sm-6">
									<p class="card-text"><b>Supporting Organisation: </b>{{ od.supporting_organisation }}</p>
								</div>
								<div class="col-sm-6">
									<p class="card-text"><b>Last Date: </b>{{ od.last_date.date }}</p>
								</div>
							</div>
							<div class="row text-left mb-2">
								<div class="col-sm-6">
									<p class="card-text"><b>From: </b>{{ od.from_date.date }}</p>
								</div>
								<div class="col-sm-6">
									<p class="card-text"><b>To: </b>{{ od.to_date.date }}</p>
								</div>
							</div>
							<div class="row text-left">
								<div class="col-sm-6">
									<p class="card-text"><b>Fees: </b>{{ od.fees }}</p>
								</div>
								<div class="col-sm-6">
									<p class="card-text"><b>Scope: </b>{{ od.scope }}</p>
								</div>
							</div>
						</div>
						<div class="p-3" style="border-top: 1px solid #eee">
							OD File:
							<a href="{{ od.correspondence.url }}" target="__blank">
								{% with od.correspondence.name|split:"/" as fname %}
									{{ fname|last }}</br>
								{% endwith %}
							</a>
						</div>
					</div>

					<div class="card-body text-center">
						<h5 class="card-title">Load Shifts</h5>
						<input type="hidden" name="od_id" value="{{ od.id }}">
						{% for lec, adjs in adjust_opts.items %}
						<h6 class="card-title mt-2">{{ lec.lname.sname }}</h6>
						<input type="hidden" name="lecture_id" value="{{ lec.id }}">
						<select class="btn btn-dark dropdown-toggle" id="teachers_option" name="faculty_id">
							{% for faculty in adjs %}
								<option value="{{ faculty.id }}">{{ faculty.username }}</option>
							{% endfor %}
						</select>
						{% endfor %}
					</div>
					<div class="card-footer text-center">
						<button type="submit" class="btn btn-info" id="option_submit">Apply</button>
					</div>
				</form>
				{% elif errors %}
				<h4>{{ errors }}</h4>
				{% elif success %}
				<h4>Success</h4>
				{% else %}
				<form action="{% url 'submit_od' %}" method="POST" enctype="multipart/form-data">
					{% csrf_token %}
					<p class="d-block font-weight-bold mb-3 mt-4 ml-2">OD details</p>
					<div class="row">
						<div class="col-md-6">
							<small class="d-block font-weight-bold mb-1 ml-2">Attending</small>
							<div class="form-group">
								<select class="form-control form-control-alternative" name="od-type" required>
									<option value="-1" disabled selected>Select Attending</option>
									<option value="STTP">STTP</option>
									<option value="Symposium">Symposium</option>
									<option value="Workshop">Workshop</option>
									<option value="Conference">Conference</option>
									<option value="Seminar">Seminar</option>
								</select>
							</div>
						</div>
						<div class="col-md-6">
							<small class="d-block font-weight-bold mb-1 ml-2">Title</small>
							<div class="form-group">
								<input class="form-control form-control-alternative" placeholder="Title" type="text" name="title" required>
							</div>
						</div>
					</div>

					<div class="row">
						<div class="col-md-6">
							<small class="d-block font-weight-bold mb-1 ml-2">Name & Address</small>
							<div class="form-group">
								<textarea class="form-control form-control-alternative" rows="3" name="og-details" placeholder="Enter name and Address of the ogranisation"></textarea>
							</div>
						</div>
						<div class="col-md-6">
							<small class="d-block font-weight-bold mb-1 ml-2">Supporting Ogranisation</small>
							<div class="form-group">
								<input class="form-control form-control-alternative" placeholder="Supporting Ogranisation" type="text" name="Supporting-og">
							</div>
						</div>
					</div>


					<p class="d-block font-weight-bold mb-3 mt-3 ml-2">Date & Duration</p>
					<div class="row">
						<div class="col-md-6">
							<small class="d-block font-weight-bold mb-1 ml-2">From</small>
							<div class="form-group">
								<div class="input-group input-group-alternative">
									<div class="input-group-prepend">
										<span class="input-group-text"><i class="ni ni-calendar-grid-58"></i></span>
									</div>
									<input type="text" class="form-control datepicker text-dark" data-provide="datepicker"
									data-date-format="mm/dd/yyyy" autocomplete="off" name="from_date" data-date-start-date="0d">
								</div>
							</div>
						</div>
						<div class="col-md-6">
							<small class="d-block font-weight-bold mb-1 ml-2">To</small>
							<div class="form-group">
								<div class="input-group input-group-alternative">
									<div class="input-group-prepend">
										<span class="input-group-text"><i class="ni ni-calendar-grid-58"></i></span>
									</div>
									<input type="text" class="form-control datepicker text-dark" data-provide="datepicker"
									data-date-format="mm/dd/yyyy" autocomplete="off" name="to_date" data-date-start-date="0d">
								</div>
							</div>
						</div>
					</div>

					<div class="row">
						<div class="col-md-6">
							<small class="d-block font-weight-bold mb-1 ml-2">Last date of registration</small>
							<div class="form-group">
								<div class="input-group input-group-alternative">
									<div class="input-group-prepend">
										<span class="input-group-text"><i class="ni ni-calendar-grid-58"></i></span>
									</div>
									<input type="text" class="form-control datepicker text-dark" data-provide="datepicker"
									data-date-format="mm/dd/yyyy" autocomplete="off" name="last_date" data-date-start-date="0d">
								</div>
							</div>
						</div>
					</div>

					<p class="d-block font-weight-bold mb-3 mt-3 ml-2">Extra</p>
					<div class="row">
						<div class="col-md-6">
							<small class="d-block font-weight-bold mb-1 ml-2">Registration Fee</small>
							<div class="form-group">
								<input class="form-control form-control-alternative" placeholder="Registration Fee" type="text" name="fees">
							</div>

							<small class="d-block font-weight-bold mb-1 ml-2">Attach email or correspondence</small>
							<div class="form-group">
								<input class="form-control form-control-alternative" type="file" name="correspondence">
							</div>
						</div>
						<div class="col-md-6">
							<small class="d-block font-weight-bold mb-1 ml-2">Purpose/Scope</small>
							<div class="form-group">
								<textarea class="form-control form-control-alternative" rows="6" name="scope"
								placeholder="Purpose or Scope for attending"></textarea>
							</div>
						</div>
					</div>

					<div class="row mb-3">
						<div class="col-md-12 d-flex justify-content-center align-items">
							<button type="submit" class="btn btn-primary">Submit</button>
						</div>
					</div>

				</form>
				{% endif %}
			</div>
		</div>

	</div>
</main>
{% endblock %}
